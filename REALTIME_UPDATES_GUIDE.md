# ๐ Real-time Updates Guide

## ููู ูุนูู ูุธุงู ุงูุชุญุฏูุซ ูู ุงูููุช ุงููุนูู

### ๐ฏ **ุงููุฏู:**
ุนุฑุถ ุชุญุฏูุซุงุช ุงูููุชุฌุงุช ููุฑุงู ุนูุฏูุง ูุชู:
- ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
- ุชุนุฏูู ุณุนุฑ ููุชุฌ
- ุชุบููุฑ ุญุงูุฉ ุงูุชุฎููุถ (`on_sale`)
- ุชุนุฏูู ุชูุงุตูู ุงูููุชุฌ

### ๐๏ธ **ุงูุจููุฉ ุงูุชูููุฉ:**

#### **1. ProductProvider:**
```dart
// ุจุฏุก ุงูุงุณุชูุงุน ููุชุญุฏูุซุงุช
void startRealTimeUpdates() {
  _productsStreamSubscription = _db
      .from('products')
      .stream(primaryKey: ['id'])
      .listen((data) {
        // ุชุญุฏูุซ ุงูุจูุงูุงุช ููุฑุงู
        _products = data.map((json) => Product.fromMap(json)).toList();
        _applyFilters(); // ุฅุนุงุฏุฉ ุชุทุจูู ุงูููุงุชุฑ
        notifyListeners(); // ุฅุฎุทุงุฑ ุฌููุน ุงููุณุชูุนูู
      });
}
```

#### **2. HomePage:**
```dart
@override
void initState() {
  super.initState();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    _startRealTimeUpdates(); // ุจุฏุก ุงูุงุณุชูุงุน
  });
}

@override
void dispose() {
  productProvider.stopRealTimeUpdates(); // ุฅููุงู ุงูุงุณุชูุงุน
  super.dispose();
}
```

### ๐ฑ **ุงูุตูุญุงุช ุงูุชู ุชูุญุฏุซ ุชููุงุฆูุงู:**

#### โ **HomePage:**
- CarouselSlider
- ProductCard grid
- New arrivals
- Sale products

#### โ **CategoryProductsPage:**
- ูุงุฆูุฉ ุงูููุชุฌุงุช ุญุณุจ ุงููุฆุฉ

#### โ **ProductCard:**
- ุงูุณุนุฑ ุงูุฃุตูู ูุงููุฎูุถ
- ูุณุจุฉ ุงูุชุฎููุถ
- ุดุงุฑุฉ "ON SALE"

### ๐๏ธ **ููุงุฎุชุจุงุฑ:**

#### **1. ูู Supabase Dashboard:**
```sql
-- ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
INSERT INTO products (name, price, on_sale, sale_price) VALUES
('ููุชุฌ ุชุฌุฑูุจู', 100, true, 80);

-- ุชุนุฏูู ุณุนุฑ ููุชุฌ ููุฌูุฏ
UPDATE products SET price = 150, sale_price = 120 WHERE id = 1;

-- ุฅุถุงูุฉ/ุฅุฒุงูุฉ ุชุฎููุถ
UPDATE products SET on_sale = true, sale_price = 50 WHERE id = 2;
UPDATE products SET on_sale = false, sale_price = null WHERE id = 3;
```

#### **2. ุณุชุญุตู ุนูู:**
- ๐ฑ ุชุญุฏูุซ ููุฑู ูู ุงูุชุทุจูู
- ๐ ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุณุนุงุฑ
- ๐ท๏ธ ุธููุฑ/ุงุฎุชูุงุก ุดุงุฑุงุช ุงูุชุฎููุถ
- ๐ ุชุญุฏูุซ ุนุฏุงุฏุงุช ุงูููุชุฌุงุช

### ๐ **Debug Information:**

ูู ุงูู Debug Console ุณุชูุทุจุน ุงูุฑุณุงุฆู ุงูุชุงููุฉ:

```bash
๐ ุจุฏุก Real-time updates ููููุชุฌุงุช...
๐ Real-time update received: 5 ููุชุฌ
๐ ุชุบููุฑ ุนุฏุฏ ุงูููุชุฌุงุช: 4 โ 5
๐ท๏ธ ุชุบููุฑ ุนุฏุฏ ุงูุนุฑูุถ: 2 โ 3
โ Real-time update applied successfully!
```

### ๐๏ธ **ุงูุชุญูู ุงููุฏูู:**

#### **ุจุฏุก ุงูุชุญุฏูุซุงุช:**
```dart
context.read<ProductProvider>().startRealTimeUpdates();
```

#### **ุฅููุงู ุงูุชุญุฏูุซุงุช:**
```dart
context.read<ProductProvider>().stopRealTimeUpdates();
```

#### **ุชุญุฏูุซ ูุฏูู:**
```dart
context.read<ProductProvider>().fetchProducts(forceRefresh: true);
```

### โก **ุงูุฃุฏุงุก:**

- โ ุงูุชุญุฏูุซุงุช ุชุญุฏุซ ููุท ุนูุฏ ุชุบููุฑ ุงูุจูุงูุงุช
- โ ูุง ุชุคุซุฑ ุนูู ุงูุฃุฏุงุก ุฅุฐุง ูู ุชุชุบูุฑ ุงูุจูุงูุงุช
- โ ุฅุนุงุฏุฉ ุชุทุจูู ุงูููุงุชุฑ ุชููุงุฆูุงู
- โ ุญูุธ ุงูุจูุงูุงุช ููู offline cache

### ๐ง **ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:**

#### **ุฅุฐุง ูู ุชุนูู ุงูุชุญุฏูุซุงุช:**

1. **ุชุญูู ูู ุงูุงุชุตุงู:**
```dart
final hasConnection = !productProvider.isOffline;
```

2. **ุชุญูู ูู ุจุฏุก ุงูุชุญุฏูุซุงุช:**
```bash
// ูุฌุจ ุฃู ุชุฑู ูุฐู ุงูุฑุณุงูุฉ ูู Debug Console
๐ ุจุฏุก Real-time updates ููููุชุฌุงุช...
```

3. **ุชุญูู ูู Supabase Connection:**
```dart
final isConnected = SupabaseService.client.auth.currentUser != null;
```

### ๐ฏ **ูุตุงุฆุญ ููุชุทููุฑ:**

#### **1. ุงุฎุชุจุงุฑ ูุญูู:**
- ุงุณุชุฎุฏู Supabase Dashboard ูุชุนุฏูู ุงูุจูุงูุงุช
- ุฑุงูุจ Debug Console ููุชุฃูุฏ ูู ุงูุชุญุฏูุซุงุช

#### **2. ุฅูุชุงุฌ:**
- Real-time updates ูุนูู ุชููุงุฆูุงู
- ูุง ุญุงุฌุฉ ูุฃู ุชุฏุฎู ูู ุงููุณุชุฎุฏู

#### **3. ุฃุฏุงุก ุฃูุถู:**
- ุงูุชุญุฏูุซุงุช ุชุญุฏุซ ููุท ููุตูุญุงุช ุงููุฑุฆูุฉ
- ุงูุจูุงูุงุช ุชูุญูุธ ููู offline cache ุชููุงุฆูุงู

---

## ๐ **ุงููุชูุฌุฉ:**
ุนูุฏ ุชุนุฏูู ุฃู ููุชุฌ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุณุชูุญุฏุซ ุฌููุน ุงูุตูุญุงุช ููุฑุงู ุจุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ุชุญููู ุงูุชุทุจูู!
